{% extends "base.html" %}
{% load static %} 
{% block content %}
<div class="container mt-5">
  <h1>Cutting Layout Visualization</h1>
  <p><strong>Stock:</strong> {{ stock_width }} x {{ stock_height }}</p>

  <svg width="{{ stock_width|floatformat:0 }}" 
       height="{{ stock_height|floatformat:0 }}"
       style="border:1px solid #ccc; background-color: #eee;">

    {% for item in layout_data %}
      {% if item.placed %}
      <!-- Draw the piece rectangle -->
      <rect x="{{ item.x|floatformat:2 }}"
            y="{{ item.y|floatformat:2 }}"
            width="{{ item.width|floatformat:2 }}"
            height="{{ item.height|floatformat:2 }}"
            fill="steelblue"
            stroke="black"
            stroke-width="1" />

      <!-- Label at the midpoint (x_mid, y_mid) -->
      <text x="{{ item.x_mid|floatformat:2 }}"
            y="{{ item.y_mid|floatformat:2 }}"
            fill="white"
            font-size="12"
            text-anchor="middle"
            alignment-baseline="middle">
        {{ item.piece_id }}
      </text>
      {% endif %}
    {% endfor %}

  </svg>
</div>
{% endblock %}
